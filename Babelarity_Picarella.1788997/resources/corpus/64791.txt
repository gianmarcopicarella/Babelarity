In recreational mathematics, a magic square is an arrangement of distinct numbers (i.e., each number is used once), usually integers, in a square grid, where the numbers in each row, and in each column, and the numbers in the main and secondary diagonals, all add up to the same number, called the "magic constant." A magic square has the same number of rows as it has columns, and in conventional math notation, "n" stands for the number of rows (and columns) it has. Thus, a magic square always contains n2 numbers, and its size (the number of rows [and columns] it has) is described as being "of order n." A magic square that contains the integers from 1 to n2 is called a normal magic square. (The term "magic square" is also sometimes used to refer to any of various types of word squares.)
Normal magic squares of all sizes except 2×2 (that is, where n = 2) can be constructed. The 1×1 magic square, with only one cell containing the number 1, is trivial. The smallest (and unique up to rotation and reflection) non-trivial case, 3×3, is shown below.
Any magic square can be rotated and reflected to produce 8 trivially distinct squares. In magic square theory, all of these are generally deemed equivalent and the eight such squares are said to make up a single equivalence class.
The constant that is the sum of every row, column and diagonal is called the magic constant or magic sum, M. Every normal magic square has a constant dependent on n, calculated by the formula M = [n(n2 + 1)] / 2. For normal magic squares of order n = 3, 4, 5, 6, 7, and 8, the magic constants are, respectively: 15, 34, 65, 111, 175, and 260 (sequence A006003 in the OEIS).
Magic squares have a long history, dating back to 650 BC in China. At various times they have acquired magical or mythical significance, and have appeared as symbols in works of art. In modern times they have been generalized a number of ways, including using extra or different constraints, multiplying instead of adding cells, using alternate shapes or more than two dimensions, and replacing numbers with shapes and addition with geometric operations.
Magic squares were known to Chinese mathematicians as early as 650 BC, and explicitly given since 570 AD, and to Islamic mathematicians possibly as early as the seventh century AD. The first magic squares of order 5 and 6 appear in an encyclopedia from Baghdad circa 983, the Encyclopedia of the Brethren of Purity (Rasa'il Ihkwan al-Safa); simpler magic squares were known to several earlier Arab mathematicians. Some of these squares were later used in conjunction with magic letters, as in Shams Al-ma'arif, to assist Arab illusionists and magicians.
Chinese literature dating from as early as 650 BC tells the legend of Lo Shu (洛書) or "scroll of the river Lo". Early records are ambiguous references to a "river map", but clearly refer to a magic square by 80 AD, and explicitly give one since 570 AD. According to the legend, there was at one time in ancient China a huge flood. While the great king Yu (禹) was trying to channel the water out to sea, a turtle emerged from it with a curious figure / pattern on its shell: a 3×3 grid in which circular dots of numbers were arranged, such that the sum of the numbers in each row, column and diagonal was the same: 15, which is also the number of days in each of the 24 cycles of the Chinese solar year. According to the legend, thereafter people were able to use this pattern in a certain way to control the river and protect themselves from floods.
The Lo Shu Square, as the magic square on the turtle shell is called, is the unique normal magic square of order three in which 1 is at the bottom and 2 is in the upper right corner. Every normal magic square of order three is obtained from the Lo Shu by rotation or reflection.
The Square of Lo Shu is also referred to as the Magic Square of Saturn.
Although the early history of magic squares in Persia is not known, it has been suggested that they were known in pre-Islamic times. It is clear, however, that the study of magic squares was common in medieval Islam in Persia, and it was thought to have begun after the introduction of chess into the region. The 10th-century Persian mathematician Buzjani, for example, left a manuscript that on page 33 contains a series of magic squares, filled by numbers in arithmetical progression, in such a way that the sums of each row, column and diagonal are equal.
Magic squares were known to Islamic mathematicians in Arabia as early as the seventh century. They may have learned about them when the Arabs came into contact with Indian culture and learned Indian astronomy and mathematics – including other aspects of combinatorial mathematics. Alternatively, the idea may have come to them from China. The first magic squares of order 5 and 6 known to have been devised by Arab mathematicians appear in an encyclopedia from Baghdad circa 983, the Rasa'il Ikhwan al-Safa (the Encyclopedia of the Brethren of Purity); simpler magic squares were known to several earlier Arab mathematicians.
The magic square of order three was described as a child-bearing charm since its first literary appearances in the works of Jābir ibn Hayyān (fl. c. 721– c. 815) and al-Ghazālī (1058–1111) and it was preserved in the tradition of the planetary tables, known from H.C.Agrippa's work, too.
The Arab mathematician Ahmad al-Buni, who worked on magic squares around 1250, attributed mystical properties to them, although no details of these supposed properties are known. There are also references to the use of magic squares in astrological calculations, a practice that seems to have originated with the Arabs.
The 3×3 magic square has been a part of rituals in India since Vedic times, and still is today. The Ganesh yantra is a 3×3 magic square. There is a well-known 10th-century 4×4 magic square on display in the Parshvanath Jain temple in Khajuraho, India.
This is known as the Chautisa Yantra. Each row, column, and diagonal, as well as each 2×2 sub-square, the corners of each 3×3 and 4×4 square, the corners of each 2×4 and 4×2 rectangle, and the offset diagonals (12+8+5+9, 1+11+16+6, 2+12+15+5, 14+2+3+15 and 7+11+10+6, 12+2+5+15, 1+13+16+4) sum to 34.
In this square, every second diagonal number adds to 17 (the same applies to offset diagonals). In addition to squares and rectangles, there are eight trapeziums – two in one direction, and the others at a rotation of 90 degrees, such as (12, 1, 16, 5) and (13, 8, 9, 4).
These characteristics (which identify it as one of the three 4×4 pandiagonal magic squares and as a most-perfect magic square) mean that the rows or columns can be rotated and maintain the same characteristics - for example:
The Kubera-Kolam, a magic square of order three, is commonly painted on floors in India. It is essentially the same as the Lo Shu Square, but with 19 added to each number, giving a magic constant of 72.
In 1300, building on the work of the Arab Al-Buni, Greek Byzantine scholar Manuel Moschopoulos wrote a mathematical treatise on the subject of magic squares, leaving out the mysticism of his predecessors. Moschopoulos was essentially unknown to the Latin west. He was not, either, the first Westerner to have written on magic squares. They appear in a Spanish manuscript written in the 1280s, presently in the Biblioteca Vaticana (cod. Reg. Lat. 1283a) due to Alfonso X of Castille. In that text, each magic square is assigned to the respective planet, as in the Islamic literature. Magic squares surface again in Italy in the 14th century, and specifically in Florence. In fact, a 6×6 and a 9×9 square are exhibited in a manuscript of the Trattato d'Abbaco (Treatise of the Abacus) by Paolo dell'Abbaco, aka Paolo Dagomari, a mathematician, astronomer and astrologer who was, among other things, in close contact with Jacopo Alighieri, a son of Dante. The squares can be seen on folios 20 and 21 of MS. 2433, at the Biblioteca Universitaria of Bologna. They also appear on folio 69rv of Plimpton 167, a manuscript copy of the Trattato dell'Abbaco from the 15th century in the Library of Columbia University. It is interesting to observe that Paolo Dagomari, like Pacioli after him, refers to the squares as a useful basis for inventing mathematical questions and games, and does not mention any magical use. Incidentally, though, he also refers to them as being respectively the Sun's and the Moon's squares, and mentions that they enter astrological calculations that are not better specified. As said, the same point of view seems to motivate the fellow Florentine Luca Pacioli, who describes 3×3 to 9×9 squares in his work De Viribus Quantitatis. Pacioli states: A lastronomia summamente hanno mostrato li supremi di quella commo Ptolomeo, al bumasar ali, al fragano, Geber et gli altri tutti La forza et virtu de numeri eserli necessaria (Masters of astronomy, such as Ptolemy, Albumasar, Alfraganus, Jabir and all the others, have shown that the force and the virtue of numbers are necessary to that science) and then goes on to describe the seven planetary squares, with no mention of magical applications.
Magic squares of order 3 through 9, assigned to the seven planets, and described as means to attract the influence of planets and their angels (or demons) during magical practices, can be found in several manuscripts all around Europe starting at least since the 15th century. Among the best known, the Liber de Angelis, a magical handbook written around 1440, is included in Cambridge Univ. Lib. MS Dd.xi.45. The text of the Liber de Angelis is very close to that of De septem quadraturis planetarum seu quadrati magici, another handbook of planetary image magic contained in the Codex 793 of the Biblioteka Jagiellońska (Ms BJ 793). The magical operations involve engraving the appropriate square on a plate made with the metal assigned to the corresponding planet, as well as performing a variety of rituals. For instance, the 3×3 square, that belongs to Saturn, has to be inscribed on a lead plate. It will, in particular, help women during a difficult childbirth.
In 1514 Albrecht Dürer immortalized a 4×4 square, of order four, in his famous engraving Melencolia I. It is described in more detail below.
In about 1510 Heinrich Cornelius Agrippa wrote De Occulta Philosophia, drawing on the Hermetic and magical works of Marsilio Ficino and Pico della Mirandola. In its 1531 edition, he expounded on the magical virtues of the seven magical squares of orders 3 to 9, each associated with one of the astrological planets, much in the same way as the older texts did. This book was very influential throughout Europe until the counter-reformation, and Agrippa's magic squares, sometimes called kameas, continue to be used within modern ceremonial magic in much the same way as he first prescribed.
The most common use for these kameas is to provide a pattern upon which to construct the sigils of spirits, angels or demons; the letters of the entity's name are converted into numbers, and lines are traced through the pattern that these successive numbers make on the kamea. In a magical context, the term magic square is also applied to a variety of word squares or number squares found in magical grimoires, including some that do not follow any obvious pattern, and even those with differing numbers of rows and columns. They are generally intended for use as talismans. For instance the following squares are: The Sator square, one of the most famous magic squares found in a number of grimoires including the Key of Solomon; a square "to overcome envy", from The Book of Power; and two squares from The Book of the Sacred Magic of Abramelin the Mage, the first to cause the illusion of a superb palace to appear, and the second to be worn on the head of a child during an angelic invocation:
The order-4 magic square Albrecht Dürer immortalized in his 1514 engraving Melencolia I, referred to above, is believed to be the first seen in European art. It is very similar to Yang Hui's square, which was created in China about 250 years before Dürer's time. The sum 34 can be found in the rows, columns, diagonals, each of the quadrants, the center four squares, and the corner squares (of the 4×4 as well as the four contained 3×3 grids). This sum can also be found in the four outer numbers clockwise from the corners (3+8+14+9) and likewise the four counter-clockwise (the locations of four queens in the two solutions of the 4 queens puzzle), the two sets of four symmetrical numbers (2+8+9+15 and 3+5+12+14), the sum of the middle two entries of the two outer columns and rows (5+9+8+12 and 3+2+15+14), and in four kite or cross shaped quartets (3+5+11+15, 2+10+8+14, 3+9+7+15, and 2+6+12+14). The two numbers in the middle of the bottom row give the date of the engraving: 1514. The numbers 1 and 4 at either side of the date correspond respectively to the letters "A" and "D," which are the initials of the artist.
Dürer's magic square can also be extended to a magic cube.
Dürer's magic square and his Melencolia I both also played large roles in Dan Brown's 2009 novel, The Lost Symbol.
The Passion façade of the Sagrada Família church in Barcelona, conceptualized by Antoni Gaudí and designed by sculptor Josep Subirachs, features a 4×4 magic square:
The magic constant of the square is 33, the age of Jesus at the time of the Passion. Structurally, it is very similar to the Melancholia magic square, but it has had the numbers in four of the cells reduced by 1.
While having the same pattern of summation, this is not a normal magic square as above, as two numbers (10 and 14) are duplicated and two (12 and 16) are absent, failing the 1→n2 rule.
Similarly to Dürer's magic square, the Sagrada Familia's magic square can also be extended to a magic cube.
The Indian mathematician Srinivasa Ramanujan created a square where - in addition to several groups of four squares - the first row shows his date of birth, Dec. 22nd, 1887.
There are many ways to construct magic squares, but the standard (and most simple) way is to follow certain configurations/formulas which generate regular patterns. Magic squares exist for all values of n, with only one exception: it is impossible to construct a magic square of order 2. Magic squares can be classified into three types: odd, doubly even (n divisible by four) and singly even (n even, but not divisible by four). Odd and doubly even magic squares are easy to generate; the construction of singly even magic squares is more difficult but several methods exist, including the LUX method for magic squares (due to John Horton Conway) and the Strachey method for magic squares.
Group theory was also used for constructing new magic squares of a given order from one of them.
The numbers of different n×n magic squares for n from 1 to 5, not counting rotations and reflections are: 1, 0, 1, 880, 275305224 (sequence A006052 in OEIS). The number for n = 6 has been estimated to be (1.7745 ± 0.0016) × 1019.
Cross-referenced to the above sequence, a new classification enumerates the magic tori that display these magic squares. The numbers of magic tori of order n from 1 to 5, are: 1, 0, 1, 255, 251449712 (sequence A270876 in OEIS).
In the 19th century, Édouard Lucas devised the general formula for order 3 magic squares. Consider the following table made up of positive integers a, b and c:
These 9 numbers will be distinct positive integers forming a magic square so long as 0 < a < b < c − a and b ≠ 2a. Moreover, every 3×3 square of distinct positive integers is of this form.
A method for constructing magic squares of odd order was published by the French diplomat de la Loubère in his book, A new historical relation of the kingdom of Siam (Du Royaume de Siam, 1693), in the chapter entitled The problem of the magical square according to the Indians. The method operates as follows:
The method prescribes starting in the central column of the first row with the number 1. After that, the fundamental movement for filling the squares is diagonally up and right, one step at a time. If a filled square is encountered, one moves vertically down one square instead, then continues as before. When an "up and to the right" move would leave the square, it is wrapped around to the last row or first column, respectively.
Starting from other squares rather than the central column of the first row is possible, but then only the row and column sums will be identical and result in a magic sum, whereas the diagonal sums will differ. The result will thus be a semimagic square and not a true magic square. Moving in directions other than north east can also result in magic squares.
The following formulae help construct magic squares of odd order
Example:
The "middle number" is always in the diagonal bottom left to top right.
The "last number" is always opposite the number 1 in an outside column or row.
Doubly even means that n is an even multiple of an even integer; or 4p (e.g. 4, 8, 12), where p is an integer.
Generic pattern All the numbers are written in order from left to right across each row in turn, starting from the top left hand corner. The resulting square is also known as a mystic square. Numbers are then either retained in the same place or interchanged with their diametrically opposite numbers in a certain regular pattern. In the magic square of order four, the numbers in the four central squares and one square at each corner are retained in the same place and the others are interchanged with their diametrically opposite numbers.
A construction of a magic square of order 4 (This is reflection of Albrecht Dürer's square.) Go left to right through the square counting and filling in on the diagonals only. Then continue by going left to right from the top left of the table and fill in counting down from 16 to 1. As shown below.
An extension of the above example for Orders 8 and 12 First generate a "truth" table, where a '1' indicates selecting from the square where the numbers are written in order 1 to n2 (left-to-right, top-to-bottom), and a '0' indicates selecting from the square where the numbers are written in reverse order n2 to 1. For M = 4, the "truth" table is as shown below, (third matrix from left.)
Note that a) there are equal number of '1's and '0's; b) each row and each column are "palindromic"; c) the left- and right-halves are mirror images; and d) the top- and bottom-halves are mirror images (c & d imply b.) The truth table can be denoted as (9, 6, 6, 9) for simplicity (1-nibble per row, 4 rows.) Similarly, for M=8, two choices for the truth table are (A5, 5A, A5, 5A, 5A, A5, 5A, A5) or (99, 66, 66, 99, 99, 66, 66, 99) (2-nibbles per row, 8 rows.) For M=12, the truth table (E07, E07, E07, 1F8, 1F8, 1F8, 1F8, 1F8, 1F8, E07, E07, E07) yields a magic square (3-nibbles per row, 12 rows.) It is possible to count the number of choices one has based on the truth table, taking rotational symmetries into account.
This method is based on a 2006 published mathematical game called medjig (author: Willem Barink, editor: Philos-Spiele). The pieces of the medjig puzzle are squares divided in four quadrants on which the numbers 0, 1, 2 and 3 are dotted in all sequences. There are 18 squares, with each sequence occurring 3 times. The aim of the puzzle is to take 9 squares out of the collection and arrange them in a 3×3 "medjig-square" in such a way that each row and column formed by the quadrants sums to 9, along with the two long diagonals.
The medjig method of constructing a magic square of order 6 is as follows:
Construct any 3×3 medjig-square (ignoring the original game's limit on the number of times that a given sequence is used).
Take the 3×3 magic square and divide each of its squares into four quadrants.
Fill these quadrants with the four numbers from 1 to 36 that equal the original number modulo 9, i.e. x+9y where x is the original number and y is a number from 0 to 3, following the pattern of the medjig-square.
Example:
Similarly, for any larger integer N, a magic square of order 2N can be constructed from any N × N medjig-square with each row, column, and long diagonal summing to 3N, and any N × N magic square (using the four numbers from 1 to 4N2 that equal the original number modulo N2).
Any number p in the order-n square can be uniquely written in the form p = an + r, with r chosen from {1,...,n}. Note that due to this restriction, a and r are not the usual quotient and remainder of dividing p by n. Consequently, the problem of constructing can be split in two problems easier to solve. So, construct two matching square grids of order n satisfying panmagic properties, one for the a-numbers (0,..., n−1), and one for the r-numbers (1,...,n). This requires a lot of puzzling, but can be done. When successful, combine them into one panmagic square. Van den Essen and many others supposed this was also the way Benjamin Franklin (1706–1790) constructed his famous Franklin squares. Three panmagic squares are shown below. The first two squares have been constructed April 2007 by Barink, the third one is some years older, and comes from Donald Morris, who used, as he supposes, the Franklin way of construction.
The order 8 square satisfies all panmagic properties, including the Franklin ones. It consists of 4 perfectly panmagic 4×4 units. Note that both order 12 squares show the property that any row or column can be divided in three parts having a sum of 290 (= 1/3 of the total sum of a row or column). This property compensates the absence of the more standard panmagic Franklin property that any 1/2 row or column shows the sum of 1/2 of the total. For the rest the order 12 squares differ a lot. The Barink 12×12 square is composed of 9 perfectly panmagic 4×4 units, moreover any 4 consecutive numbers starting on any odd place in a row or column show a sum of 290. The Morris 12×12 square lacks these properties, but on the contrary shows constant Franklin diagonals. For a better understanding of the constructing decompose the squares as described above, and see how it was done. And note the difference between the Barink constructions on the one hand, and the Morris/Franklin construction on the other hand.
In the book Mathematics in the Time-Life Science Library Series, magic squares by Euler and Franklin are shown. Franklin designed this one so that any four-square subset (any four contiguous squares that form a larger square, or any four squares equidistant from the center) total 130. In Euler's square, the rows and columns each total 260, and halfway they total 130 – and a chess knight, making its L-shaped moves on the square, can touch all 64 boxes in consecutive numerical order.
There is a method reminiscent of the Kronecker product of two matrices, that builds an nm × nm magic square from an n × n magic square and an m × m magic square.
A magic square can be constructed using genetic algorithms. In this process an initial population of squares with random values is generated. The fitness scores of these individual squares are calculated based on the degree of deviation in the sums of the rows, columns, and diagonals. The population of squares reproduce by exchanging values, together with some random mutations. Those squares with a higher fitness score are more likely to reproduce. The fitness scores of the next generation squares are calculated, and this process continues until a magic square is found or a time limit is reached.
Similar to the Sudoku and KenKen puzzles, solving partially completed has become a popular mathematical puzzle. Puzzle solving centers on analyzing the initial given values and possible values of the empty squares. One or more solution arises as the participant uses logic and permutation group theory to rule out all unsuitable number combinations.
Certain extra restrictions can be imposed on magic squares. If not only the main diagonals but also the broken diagonals sum to the magic constant, the result is a panmagic square.
If raising each number to the nth power yields another magic square, the result is a bimagic (n = 2), a trimagic (n = 3), or, in general, a multimagic square.
A magic square in which the number of letters in the name of each number in the square generates another magic square is called an alphamagic square.
Sometimes the rules for magic squares are relaxed, so that only the rows and columns but not necessarily the diagonals sum to the magic constant (this is usually called a semimagic square).
In heterosquares and antimagic squares, the 2n + 2 sums must all be different.
Instead of adding the numbers in each row, column and diagonal, one can apply some other operation. For example, a multiplicative magic square has a constant product of numbers. A multiplicative magic square can be derived from an additive magic square by raising 2 (or any other integer) to the power of each element, because the logarithm of the product of 2 numbers is the sum of logarithm of each. Alternatively, if any 3 numbers in a line are 2a, 2b and 2c, their product is 2a+b+c, which is constant if a+b+c is constant, as they would be if a, b and c were taken from ordinary (additive) magic square. For example, the original Lo-Shu magic square becomes:
Other examples of multiplicative magic squares include:
Still using Ali Skalli's non iterative method, it is possible to produce an infinity of multiplicative magic squares of complex numbers belonging to 
          C
    {\displaystyle \mathbb {C} }
   set. On the example below, the real and imaginary parts are integer numbers, but they can also belong to the entire set of real numbers 
          R
    {\displaystyle \mathbb {R} }
  . The product is: −352,507,340,640 − 400,599,719,520 i.
Additive-multiplicative magic squares and semimagic squares satisfy properties of both ordinary and multiplicative magic squares and semimagic squares, respectively.
It is unknown if any additive-multiplicative magic squares smaller than 8×8 exist, but it has been proven that no 3×3 or 4×4 additive-multiplicative magic squares and no 3×3 additive-multiplicative semimagic squares exist.
Other shapes than squares can be considered. The general case is to consider a design with N parts to be magic if the N parts are labeled with the numbers 1 through N and a number of identical sub-designs give the same sum. Examples include magic dodecahedrons, magic triangles magic stars, and magic hexagons. Going up in dimension results in magic cubes and other magic hypercubes.
Edward Shineman has developed yet another design in the shape of magic diamonds.
Possible magic shapes are constrained by the number of equal-sized, equal-sum subsets of the chosen set of labels. For example, if one proposes to form a magic shape labeling the parts with {1, 2, 3, 4}, the sub-designs will have to be labeled with {1,4} and {2,3}.
Magic squares may be constructed which contain geometric shapes instead of numbers. Such squares, known as geometric magic squares, were invented and named by Lee Sallows in 2001.
One can combine two or more of the above extensions, resulting in such objects as multiplicative multimagic hypercubes. Little seems to be known about this subject.
Over the years, many mathematicians, including Euler, Cayley and Benjamin Franklin have worked on magic squares, and discovered fascinating relations.
Rudolf Ondrejka (1928–2001) discovered the following 3×3 magic square of primes, in this case nine Chen primes:
The Green–Tao theorem implies that there are arbitrarily large magic squares consisting of primes.
In 1992, Demirörs, Rafraf, and Tanik published a method for converting some magic squares into n-queens solutions, and vice versa.
As mentioned above, the set of normal squares of order three constitutes a single equivalence class-all equivalent to the Lo Shu square. Thus there is basically just one normal magic square of order 3. But the number of distinct normal magic squares rapidly increases for higher orders. There are 880 distinct magic squares of order 4 and 275,305,224 of order 5. These squares are respectively displayed on 255 magic tori of order 4, and 251,449,712 of order 5. The number of magic tori and distinct normal squares is not yet known for any higher order.
Algorithms tend to only generate magic squares of a certain type or classification, making counting all possible magic squares quite difficult. Traditional counting methods have proven unsuccessful, statistical analysis using the Monte Carlo method has been applied. The basic principle applied to magic squares is to randomly generate n × n matrices of elements 1 to n2 and check if the result is a magic square. The probability that a randomly generated matrix of numbers is a magic square is directly proportional to the number of magic squares.
More intricate versions of the Monte Carlo method, such as the exchange Monte Carlo, and Monte Carlo Backtracking have produced even more accurate estimations. Using these methods it has been shown that the probability of magic squares decreases rapidly as n increases. Using fitting functions give the curves seen to the right.
On October 9, 2014 the post office of Macao in the People's Republic of China issued a series of stamps based on magic squares. The figure below shows the stamps featuring the nine magic squares chosen to be in this collection.
